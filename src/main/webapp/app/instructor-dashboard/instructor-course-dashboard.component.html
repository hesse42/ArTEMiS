<div *ngIf="course">
    <h2>{{course.title}} <small>{{exerciseCall.length}} <span jhiTranslate="arTeMiSApp.exercise.home.title"> exercises</span>, {{studentArray.length}} <span jhiTranslate="instructorDashboard.students">students</span></small></h2>
<jhi-alert></jhi-alert>
    <button class="btn btn-primary btn-sm"  (click)="exportResults()"><i class="fa fa-download fa-fw"></i>&nbsp;Export Results as CSV</button>
    <div class="table-responsive" *ngIf="studentArray">
        <table class="table table-striped">
            <thead>
            <tr jhiSort [(predicate)]="predicate" [(ascending)]="reverse"  [callback]="callback">
                <th jhiSortBy="firstName">
                    <span jhiTranslate="logs.table.name">Name</span> <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="login">
                    <span jhiTranslate="userManagement.login">Login</span> <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="participated">
                    <span jhiTranslate="instructorDashboard.participated">Participated in exercises </span>(%) <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="successful">
                    <span jhiTranslate="instructorDashboard.completedExercises">Successfully completed exercises </span>(%) <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="totalScoreQuizzes">
                    <span jhiTranslate="instructorDashboard.totalScoreQuizzes">Total Score Quizzes </span>(%)<span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="totalScoreProgramming">
                    <span jhiTranslate="instructorDashboard.totalScoreProgramming">Total Score Programming </span>(%) <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="totalScoreModeling">
                    <span jhiTranslate="instructorDashboard.totalScoreModeling">Total Score Modeling </span>(%) <span class="fa fa-sort"></span>
                </th>

                <th jhiSortBy="overallScore">
                    <span jhiTranslate="instructorDashboard.overallScore">Overall Score</span> <span class="fa fa-sort"></span>
                </th>

            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let row of studentArray | sortBy: predicate: reverse">
                <td>{{ row.firstName }} {{ row.lastName }}</td>
                <td>{{ row.login }}</td>
                <td>{{ row.participated }} ({{ (row.participated/numberOfExercises)*100 | number: '0.0-0'}}%)</td>
                <td>{{ row.successful }} ({{ (row.successful/numberOfExercises)*100 | number: '0.0-0'}}%)</td>
                <td>{{ row.totalScores['quiz'] }} ({{ (row.totalScores['quiz'] / maxScoreForQuizzes)*100 | number: '0.0-0'}}%)</td>
                <td>{{ row.totalScores['programming-exercise'] }} ({{ (row.totalScores['programming-exercise'] / maxScoreForProgramming)*100 | number: '0.0-0'}}%)</td>
                <td>{{ row.totalScores['modeling-exercise'] }} ({{ (row.totalScores['modeling-exercise'] / maxScoreForModeling)*100 | number: '0.0-0'}}%)</td>
                <td>{{ row.overallScore | number: '0.0-0'}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
